<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="./dist/aframe-street-component.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
    <script src="https://rawgit.com/mayognaise/aframe-mouse-cursor-component/master/dist/aframe-mouse-cursor-component.min.js"></script>
  </head>

  <body>
    <a-scene
      renderer="colorManagement: true; highRefreshRate: true; foveationLevel: 3; physicallyCorrectLights: true; logarithmicDepthBuffer: false;"
      fogoff="type: linear; color: #D5C69B; far: 200"
      gltf-model="dracoDecoderPath: https://www.gstatic.com/draco/v1/decoders/;"
      cursor="rayOrigin: mouse"
    >
      <a-assets>
        <img
          id="grass-texture"
          src="assets/materials/TexturesCom_Grass0052_1_seamless_S.jpg"
        />
        <img
          id="markings-atlas"
          src="assets/materials/lane-markings-atlas_1024.png"
          crossorigin="anonymous"
        />
        <img
          id="sidewalk-texture"
          src="assets/materials/TexturesCom_FloorsRegular0301_1_seamless_S.jpg"
          crossorigin="anonymous"
        />
        <img
          id="drive-lane-texture"
          src="assets/materials/TexturesCom_Roads0086_1_seamless_S_rotate.jpg"
          crossorigin="anonymous"
        />
      </a-assets>

      <a-entity light="type: ambient; color: #FFF; intensity: 2"></a-entity>
      <a-entity
        light="type: directional; color: #FFF; intensity: 0.6"
        position="0.5 1 -1"
      ></a-entity>

      <a-entity position="-145 0 30" camera mouse-cursor></a-entity>

      <a-entity rotation="0 90 90">
        <a-entity id="main">
          <!--馬路 由左至右-->
          <a-entity
            id="road1"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter4d5; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter4d5; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-7.6 0 1"
              vertex-b="-7.6 0 -62"
              vertex-c="-3.1 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-7.6 0 -62"
              vertex-b="-3.1 0 -62"
              vertex-c="-3.1 0 1"
            ></a-triangle>
          </a-entity>

          <a-entity
            id="road2"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter3; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter3; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-3.1 0 1"
              vertex-b="-3.1 0 -62"
              vertex-c="-0.1 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-3.1 0 -62"
              vertex-b="-0.1 0 -62"
              vertex-c="-0.1 0 1"
            ></a-triangle>
          </a-entity>

          <a-entity
            id="road3"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter3; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter3; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-0.1 0 1"
              vertex-b="-0.1 0 -62"
              vertex-c="3 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-0.1 0 -62"
              vertex-b="3 0 -62"
              vertex-c="3 0 1"
            ></a-triangle>
          </a-entity>

          <a-entity
            id="road4"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter4d5; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter4d5; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="3 0 1"
              vertex-b="3 0 -62"
              vertex-c="7.6 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="3 0 -62"
              vertex-b="7.6 0 -62"
              vertex-c="7.6 0 1"
            ></a-triangle>
          </a-entity>
          <!--馬路結束-->

          <!--人行道 由左至右-->
          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="-10.1 0 1"
            vertex-b="-10.1 0 -62"
            vertex-c="-7.6 0 1"
          ></a-triangle>
          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="-10.1 0 -62"
            vertex-b="-7.6 0 -62"
            vertex-c="-7.6 0 1"
          ></a-triangle>

          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="7.6 0 1"
            vertex-b="7.6 0 -62"
            vertex-c="10.1 0 1"
          ></a-triangle>
          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="7.6 0 -62"
            vertex-b="10.1 0 -62"
            vertex-c="10.1 0 1"
          ></a-triangle>
          <!--人行道結束-->

          <!--漸變帶兩邊地板-->
          <a-entity
            position="0 -0.5 -100"
            rotation="-90 0 0"
            geometry="primitive:plane;height:350;width:350"
            material="src:#grass-texture;repeat:5 5;roughness:1"
          ></a-entity>

          <!--雙黃線-->
          <a-entity
            position="-1.52 0.01 -99"
            rotation="-90 0 3.576"
            atlas-uvs="totalColumns: 4; column: 3"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.5; height:48.1;"
          ></a-entity>
          <a-entity
            position="-3.03 0.01 -130.4"
            rotation="-90 0 0"
            atlas-uvs="totalColumns: 4; column: 3"
            scale="1 0.62 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.5; height:24;"
          ></a-entity>
          <!--雙黃線結束-->

          <!--馬路虛線-->
          <a-entity
            position="-3 0.01 -83"
            rotation="-90 0 0"
            atlas-uvs="totalRows: 1; totalColumns: 8; row: 1; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.67;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.20; height:16;"
          ></a-entity>

          <a-entity
            position="0 0.01 -113"
            rotation="-90 0 0"
            atlas-uvs="totalRows: 1; totalColumns: 8; row: 1; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.67;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.20; height:16;"
          ></a-entity>

          <a-entity
            position="3 0.01 -99"
            rotation="-90 0 0"
            atlas-uvs="totalRows: 1; totalColumns: 8; row: 1; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 8;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.20; height:48;"
          ></a-entity>
          <a-entity
            position="0 0.01 -130.4"
            rotation="-90 0 0"
            atlas-uvs="totalColumns: 8; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.5;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:14"
          ></a-entity>
          <a-entity
            position="3 0.01 -130.4"
            rotation="-90 0 0"
            atlas-uvs="totalColumns: 8; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.5;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:14"
          ></a-entity>
          <!--馬路虛線結束-->

          <a-entity
            id="street-parent"
            street='left: grass; right: grass; JSON:
            {
              "streetmixSegmentsFeet": [
              {"type":"sidewalk","variantString":"dense","width":8.33333},
              {"type":"drive-lane","variantString":"inbound|car","width":15},
              {"type":"turn-lane","variantString":"inbound|right-straight","width":10},
              {"type":"turn-lane","variantString":"outbound|left-straight","width":10},
              {"type":"drive-lane","variantString":"outbound|car","width":15},
              {"type":"sidewalk","variantString":"dense","width":8.33333}
              ]
            }'
          ></a-entity
        ></a-entity>

        <a-entity position="0 0 -291.4" rotation="0 180 0">
          <!--馬路 由左至右-->
          <a-entity
            id="road5"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter4d5; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter4d5; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-7.6 0 1"
              vertex-b="-7.6 0 -62"
              vertex-c="-3.1 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-7.6 0 -62"
              vertex-b="-3.1 0 -62"
              vertex-c="-3.1 0 1"
            ></a-triangle>
          </a-entity>

          <a-entity
            id="road6"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter3; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter3; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-3.1 0 1"
              vertex-b="-3.1 0 -62"
              vertex-c="-0.1 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-3.1 0 -62"
              vertex-b="-0.1 0 -62"
              vertex-c="-0.1 0 1"
            ></a-triangle>
          </a-entity>

          <a-entity
            id="road7"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter3; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter3; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-0.1 0 1"
              vertex-b="-0.1 0 -62"
              vertex-c="3 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="-0.1 0 -62"
              vertex-b="3 0 -62"
              vertex-c="3 0 1"
            ></a-triangle>
          </a-entity>

          <a-entity
            id="road8"
            position="0 0 -76"
            event-set__enter="_event: mouseenter; _target: #meter4d5; visible: true"
            event-set__leave="_event: mouseleave; _target: #meter4d5; visible: false"
          >
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="3 0 1"
              vertex-b="3 0 -62"
              vertex-c="7.6 0 1"
            ></a-triangle>
            <a-triangle
              material="side:double;repeat:0.3 2;offset:0.55 0"
              src="#drive-lane-texture"
              vertex-a="3 0 -62"
              vertex-b="7.6 0 -62"
              vertex-c="7.6 0 1"
            ></a-triangle>
          </a-entity>
          <!--馬路結束-->

          <!--人行道 由左至右-->
          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="-10.1 0 1"
            vertex-b="-10.1 0 -62"
            vertex-c="-7.6 0 1"
          ></a-triangle>
          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="-10.1 0 -62"
            vertex-b="-7.6 0 -62"
            vertex-c="-7.6 0 1"
          ></a-triangle>

          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="7.6 0 1"
            vertex-b="7.6 0 -62"
            vertex-c="10.1 0 1"
          ></a-triangle>
          <a-triangle
            position="0 0 -76"
            material="side:double;repeat:1.5 30;offset:0.55 0"
            src="#sidewalk-texture"
            vertex-a="7.6 0 -62"
            vertex-b="10.1 0 -62"
            vertex-c="10.1 0 1"
          ></a-triangle>
          <!--人行道結束-->

          <!--雙黃線-->
          <a-entity
            position="-1.52 0.01 -99"
            rotation="-90 0 3.576"
            atlas-uvs="totalColumns: 4; column: 3"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.5; height:48.1;"
          ></a-entity>
          <a-entity
            position="-3.03 0.01 -130.4"
            rotation="-90 0 0"
            atlas-uvs="totalColumns: 4; column: 3"
            scale="1 0.62 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 25;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.5; height:24;"
          ></a-entity>
          <!--雙黃線結束-->

          <!--馬路虛線-->
          <a-entity
            position="-3 0.01 -83"
            rotation="-90 0 0"
            atlas-uvs="totalRows: 1; totalColumns: 8; row: 1; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.67;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.20; height:16;"
          ></a-entity>

          <a-entity
            position="0 0.01 -113"
            rotation="-90 0 0"
            atlas-uvs="totalRows: 1; totalColumns: 8; row: 1; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.67;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.20; height:16;"
          ></a-entity>

          <a-entity
            position="3 0.01 -99"
            rotation="-90 0 0"
            atlas-uvs="totalRows: 1; totalColumns: 8; row: 1; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 8;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.20; height:48;"
          ></a-entity>
          <a-entity
            position="0 0.01 -130.4"
            rotation="-90 0 0"
            atlas-uvs="totalColumns: 8; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.5;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:14"
          ></a-entity>
          <a-entity
            position="3 0.01 -130.4"
            rotation="-90 0 0"
            atlas-uvs="totalColumns: 8; column: 4"
            scale="1 1 1"
            material="src: #markings-atlas;alphaTest: 0;transparent:true;repeat:1 2.5;"
            geometry="primitive: plane; buffer: false; skipCache: true; width:0.2; height:14"
          ></a-entity>
          <!--馬路虛線結束-->

          <a-entity
            id="street-parent"
            street='left: grass; right: grass; JSON:
            {
              "streetmixSegmentsFeet": [
              {"type":"sidewalk","variantString":"dense","width":8.33333},
              {"type":"drive-lane","variantString":"inbound|car","width":15},
              {"type":"turn-lane","variantString":"inbound|right-straight","width":10},
              {"type":"turn-lane","variantString":"outbound|left-straight","width":10},
              {"type":"drive-lane","variantString":"outbound|car","width":15},
              {"type":"sidewalk","variantString":"dense","width":8.33333}
              ]
            }'
          ></a-entity>
        </a-entity>

        <!--不重要道路(上下)-->
        <a-entity id="unimportant" position="0 -0.1 -145.7">
          <a-entity
            position="-82.5 0 0"
            rotation="0 90 0"
            id="street-parent"
            street='showGround: false; left: none; right: none; JSON:
            {
              "streetmixSegmentsFeet": [
              {"type":"sidewalk","variantString":"dense","width":8.33333},
              {"type":"drive-lane","variantString":"inbound|car","width":15},
              {"type":"turn-lane","variantString":"inbound|right-straight","width":10},
              {"type":"turn-lane","variantString":"outbound|left-straight","width":10},
              {"type":"drive-lane","variantString":"outbound|car","width":15},
              {"type":"sidewalk","variantString":"dense","width":8.33333}
              ]
            }'
          ></a-entity>

          <a-entity
            position="82.5 0 0"
            rotation="0 90 0"
            id="street-parent"
            street='showGround: false; left: none; right: none; JSON:
            {
              "streetmixSegmentsFeet": [
              {"type":"sidewalk","variantString":"dense","width":8.33333},
              {"type":"drive-lane","variantString":"inbound|car","width":15},
              {"type":"turn-lane","variantString":"inbound|right-straight","width":10},
              {"type":"turn-lane","variantString":"outbound|left-straight","width":10},
              {"type":"drive-lane","variantString":"outbound|car","width":15},
              {"type":"sidewalk","variantString":"dense","width":8.33333}
              ]
            }'
          ></a-entity>

          <a-plane
            position="0 0 0"
            rotation="-90 0 0"
            width="15"
            height="15.5"
            color="#545f59"
          ></a-plane>

          <a-text
            position="0 0 -1.6"
            rotation="-90 -90 0"
            id="meter3"
            value="3m"
            color="white"
            scale="10 10 10"
            visible="false"
          ></a-text>

          <a-text
            position="0 0 -2.25"
            rotation="-90 -90 0"
            id="meter4d5"
            value="4.5m"
            color="white"
            scale="10 10 10"
            visible="false"
          ></a-text>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
